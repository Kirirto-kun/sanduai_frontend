# –¢–ó –¥–ª—è Frontend: –ë–ñ–ë/–¢–ñ–ë (–°–û–†/–°–û–ß)

## –°—É—Ç—å –º–æ–¥—É–ª—è

–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —ç–∫–∑–∞–º–µ–Ω–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –±–∞–ª–ª–æ–≤.

---

## –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### 1. `POST /api/bjb/generate`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —ç–∫–∑–∞–º–µ–Ω (–ò–ò —Å–æ–∑–¥–∞–µ—Ç –∑–∞–¥–∞–Ω–∏—è –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –±–∞–ª–ª—ã).

**–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ:**
- `subject` - –ü—Ä–µ–¥–º–µ—Ç (—Å—Ç—Ä–æ–∫–∞)
- `grade` - –ö–ª–∞—Å—Å (—Å—Ç—Ä–æ–∫–∞)
- `topic` - –¢–µ–º–∞ —ç–∫–∑–∞–º–µ–Ω–∞ (—Å—Ç—Ä–æ–∫–∞)
- `learning_objectives` - –ú–∞—Å—Å–∏–≤ —Ü–µ–ª–µ–π –æ–±—É—á–µ–Ω–∏—è (–º–∏–Ω–∏–º—É–º 1)
- `total_score` - –û–±—â–∏–π –±–∞–ª–ª —ç–∫–∑–∞–º–µ–Ω–∞ (—á–∏—Å–ª–æ > 0)
- `exam_type` - –¢–∏–ø: `"bjb"` (–°–û–†, –∫–æ—Ä–æ—Ç–∫–∏–π) –∏–ª–∏ `"tjb"` (–°–û–ß, –¥–ª–∏–Ω–Ω—ã–π)
- `lang` - –Ø–∑—ã–∫: `"kaz"` –∏–ª–∏ `"rus"`

**–ü–æ–ª—É—á–∞–µ—Ç–µ:**
```
{
  "meta": {...–≤–∞—à–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã...},
  "tasks": [
    {
      "id": "task_1",
      "widget_type": "multiple_choice" | "matching" | "true_false" | "text_open",
      "content": {...–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ –∑–∞–¥–∞–Ω–∏—è...},
      "grading": {
        "correct_answer": ...,
        "descriptor": "–ü—Ä–∏–º–µ–Ω—è–µ—Ç –∑–∞–∫–æ–Ω –û–º–∞",
        "score": 5
      }
    },
    ...
  ],
  "calculated_total_score": 20
}
```

**–í—Ä–µ–º—è:** 20-50 —Å–µ–∫—É–Ω–¥

**–í–∞–∂–Ω–æ:** Backend –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Å—É–º–º–∞ –≤—Å–µ—Ö `task.grading.score` = `total_score`. –ï—Å–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç ‚Üí –æ—à–∏–±–∫–∞ 502.

---

### 2. `POST /api/bjb/export/docx`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç DOCX —Ñ–∞–π–ª (–≤–µ—Ä—Å–∏—è –¥–ª—è —É—á–µ–Ω–∏–∫–∞ –∏–ª–∏ —É—á–∏—Ç–µ–ª—è).

**–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ:**
- `exam_project` - –í–µ—Å—å –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∏–ª–∏ –æ—Ç `/generate`
- `version` - –í–µ—Ä—Å–∏—è: `"student"` –∏–ª–∏ `"teacher"`

**–í–µ—Ä—Å–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞:**

| version | –ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ |
|---------|-----------|
| `"student"` | –¢–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å—ã. –ë–µ–∑ –æ—Ç–≤–µ—Ç–æ–≤. –ë–µ–∑ —Ä—É–±—Ä–∏–∫–∞—Ç–æ—Ä–∞. |
| `"teacher"` | –í–æ–ø—Ä–æ—Å—ã + –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã + —Ç–∞–±–ª–∏—Ü–∞ —Ä—É–±—Ä–∏–∫–∞—Ç–æ—Ä–∞ —Å –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–∞–º–∏. |

**–ü–æ–ª—É—á–∞–µ—Ç–µ:** DOCX —Ñ–∞–π–ª –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è

**–í—Ä–µ–º—è:** 3-5 —Å–µ–∫—É–Ω–¥

---

## –¢–∏–ø—ã –∑–∞–¥–∞–Ω–∏–π (widget_type)

| –¢–∏–ø | –ß—Ç–æ —ç—Ç–æ | content |
|-----|---------|---------|
| `multiple_choice` | –¢–µ—Å—Ç —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ | `{question, options: [...]}` |
| `matching` | –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ | `{instruction, pairs: [{left, right}, ...]}` |
| `true_false` | –í–µ—Ä–Ω–æ/–ù–µ–≤–µ—Ä–Ω–æ | `{statement}` |
| `text_open` | –û—Ç–∫—Ä—ã—Ç—ã–π –≤–æ–ø—Ä–æ—Å | `{question, image_placeholder_prompt?}` |

---

## –õ–æ–≥–∏–∫–∞ –±–∞–ª–ª–æ–≤ (–≤–∞–∂–Ω–æ!)

### –ù–∞ —Ñ—Ä–æ–Ω—Ç–µ:

1. **–ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:** –ü–æ–∫–∞–∑–∞—Ç—å –≤–∏–¥–∂–µ—Ç `–¢–µ–∫—É—â–∏–π / –¶–µ–ª–µ–≤–æ–π` (–Ω–∞–ø—Ä–∏–º–µ—Ä: `20 / 20 ‚úÖ`)
2. **–£—á–∏—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø—Ä–∞–≤–∏—Ç—å –±–∞–ª–ª—ã:** –£ –∫–∞–∂–¥–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –ø–æ–ª–µ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è `score`
3. **–ü–µ—Ä–µ—Å—á–µ—Ç —Å—É–º–º—ã:** –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –±–∞–ª–ª–∞ ‚Üí –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å —Å—É–º–º—É
4. **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ —ç–∫—Å–ø–æ—Ä—Ç–æ–º:** –ï—Å–ª–∏ —Å—É–º–º–∞ ‚â† —Ü–µ–ª–µ–≤–æ–π ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É, –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —ç–∫—Å–ø–æ—Ä—Ç

### –§–æ—Ä–º—É–ª–∞:
```
currentTotal = tasks.reduce((sum, task) => sum + task.grading.score, 0)
isValid = (currentTotal === exam_project.meta.total_score)
```

---

## LaTeX —Ñ–æ—Ä–º—É–ª—ã

–ò–ò –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç —Ñ–æ—Ä–º—É–ª—ã –≤ `$$...$$ `:
```
"–†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –ø–æ —Ñ–æ—Ä–º—É–ª–µ $$E = mc^2$$"
```

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
- **–í UI —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞:** –ü–æ–∫–∞–∑–∞—Ç—å –∫–∞–∫ –µ—Å—Ç—å: `$$E = mc^2$$` (–º–æ–∂–Ω–æ –ø–æ–¥—Å–≤–µ—Ç–∏—Ç—å)
- **–í DOCX:** Backend —Å–∞–º –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (—Ñ—Ä–æ–Ω—Ç—É –Ω–∏—á–µ–≥–æ –¥–µ–ª–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ)

---

## Image Placeholder

–ï—Å–ª–∏ –ò–ò —É–∫–∞–∑–∞–ª `image_placeholder_prompt`:
```json
{
  "question": "–û–±—ä—è—Å–Ω–∏—Ç–µ —Å—Ö–µ–º—É...",
  "image_placeholder_prompt": "–°—Ö–µ–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è"
}
```

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
- –ü–æ–∫–∞–∑–∞—Ç—å –∏–∫–æ–Ω–∫—É üñºÔ∏è –∏ —Ç–µ–∫—Å—Ç –æ–ø–∏—Å–∞–Ω–∏—è
- –í DOCX backend –≤—Å—Ç–∞–≤–∏—Ç `[–ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ï: –æ–ø–∏—Å–∞–Ω–∏–µ]`

---

## User Flow

### –®–∞–≥ 1: –£—á–∏—Ç–µ–ª—å –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É
- –ü—Ä–µ–¥–º–µ—Ç, –∫–ª–∞—Å—Å, —Ç–µ–º–∞
- –¢–∏–ø —ç–∫–∑–∞–º–µ–Ω–∞ (–ë–ñ–ë –∏–ª–∏ –¢–ñ–ë)
- –¶–µ–ª–∏ –æ–±—É—á–µ–Ω–∏—è (—Å–ø–∏—Å–æ–∫)
- –û–±—â–∏–π –±–∞–ª–ª (—á–∏—Å–ª–æ)
- –Ø–∑—ã–∫

‚Üí **–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞** `/api/bjb/generate`

### –®–∞–≥ 2: –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞–Ω–∏–π
- –í–∏–¥–∂–µ—Ç –±–∞–ª–ª–æ–≤: `–¢–µ–∫—É—â–∏–π / –¶–µ–ª–µ–≤–æ–π`
- –ï—Å–ª–∏ —Å—É–º–º–∞ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç ‚Üí –∫—Ä–∞—Å–Ω—ã–º + –∫–Ω–æ–ø–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã
- –ï—Å–ª–∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç ‚Üí –∑–µ–ª–µ–Ω—ã–º + –∫–Ω–æ–ø–∫–∏ –∞–∫—Ç–∏–≤–Ω—ã

### –®–∞–≥ 3: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –£—á–∏—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å –±–∞–ª–ª –ª—é–±–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è
- –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å —Å—É–º–º—É
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å

### –®–∞–≥ 4: –≠–∫—Å–ø–æ—Ä—Ç
- **–î–ª—è —É—á–µ–Ω–∏–∫–∞:** –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ `/export/docx` —Å `version: "student"`
- **–î–ª—è —É—á–∏—Ç–µ–ª—è:** –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ `/export/docx` —Å `version: "teacher"`
- –ú–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å –æ–±–µ –≤–µ—Ä—Å–∏–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

---

## –û—à–∏–±–∫–∏

| –ö–æ–¥ | –ü—Ä–∏—á–∏–Ω–∞ | –ß—Ç–æ –ø–æ–∫–∞–∑–∞—Ç—å |
|-----|---------|--------------|
| 401 | –¢–æ–∫–µ–Ω –Ω–µ–≤–∞–ª–∏–¥–µ–Ω | "–í–æ–π–¥–∏—Ç–µ –∑–∞–Ω–æ–≤–æ" |
| 502 | –ò–ò –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏–ª –±–∞–ª–ª—ã | "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑" |
| 502 | LLM –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª | "–°–µ—Ä–≤–∏—Å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω" |
| 400 | –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ | "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º—É" (total_score > 0, learning_objectives –Ω–µ –ø—É—Å—Ç) |

---

## –ë–ñ–ë vs –¢–ñ–ë

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ë–ñ–ë (–°–û–†) | –¢–ñ–ë (–°–û–ß) |
|----------|-----------|-----------|
| exam_type | `"bjb"` | `"tjb"` |
| –ù–∞–∑–≤–∞–Ω–∏–µ | –°—É–º–º–∞—Ç–∏–≤–Ω–æ–µ –û—Ü–µ–Ω–∏–≤–∞–Ω–∏–µ –∑–∞ –†–∞–∑–¥–µ–ª | –°—É–º–º–∞—Ç–∏–≤–Ω–æ–µ –û—Ü–µ–Ω–∏–≤–∞–Ω–∏–µ –∑–∞ –ß–µ—Ç–≤–µ—Ä—Ç—å |
| –ó–∞–¥–∞–Ω–∏–π | 3-5 | 5-10 |
| –°–ª–æ–∂–Ω–æ—Å—Ç—å | –ü—Ä–æ—â–µ | –°–ª–æ–∂–Ω–µ–µ |
| –¢–∏–ø–∏—á–Ω—ã–π –±–∞–ª–ª | 10-20 | 20-30 |

---

## –ß–µ–∫-–ª–∏—Å—Ç UI

**–§–æ—Ä–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:**
- [ ] –†–∞–¥–∏–æ–∫–Ω–æ–ø–∫–∏: –ë–ñ–ë (–°–û–†) / –¢–ñ–ë (–°–û–ß)
- [ ] –ü–æ–ª—è: –ü—Ä–µ–¥–º–µ—Ç, –ö–ª–∞—Å—Å, –¢–µ–º–∞
- [ ] –°–ø–∏—Å–æ–∫ —Ü–µ–ª–µ–π –æ–±—É—á–µ–Ω–∏—è (–¥–æ–±–∞–≤–∏—Ç—å/—É–¥–∞–ª–∏—Ç—å)
- [ ] –ü–æ–ª–µ "–û–±—â–∏–π –±–∞–ª–ª" (—á–∏—Å–ª–æ)
- [ ] –†–∞–¥–∏–æ–∫–Ω–æ–ø–∫–∏: –ö–∞–∑–∞—Ö—Å–∫–∏–π / –†—É—Å—Å–∫–∏–π
- [ ] –ö–Ω–æ–ø–∫–∞ "–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å" + –ª–æ–∞–¥–µ—Ä 20-50 —Å–µ–∫

**–†–µ–¥–∞–∫—Ç–æ—Ä:**
- [ ] –í–∏–¥–∂–µ—Ç –±–∞–ª–ª–æ–≤ –≤–≤–µ—Ä—Ö—É: `20 / 20 ‚úÖ` –∏–ª–∏ `18 / 20 ‚ùå`
- [ ] –ö–∞—Ä—Ç–æ—á–∫–∏ –∑–∞–¥–∞–Ω–∏–π —Å –ø–æ–ª–µ–º –±–∞–ª–ª–∞ (—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–µ)
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Å—á–µ—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
- [ ] –ò–∫–æ–Ω–∫–∞ üñºÔ∏è –µ—Å–ª–∏ –µ—Å—Ç—å image_placeholder_prompt

**–≠–∫—Å–ø–æ—Ä—Ç:**
- [ ] –ö–Ω–æ–ø–∫–∞ "–°–∫–∞—á–∞—Ç—å –¥–ª—è —É—á–µ–Ω–∏–∫–∞" (–µ—Å–ª–∏ –±–∞–ª–ª—ã ‚úÖ)
- [ ] –ö–Ω–æ–ø–∫–∞ "–°–∫–∞—á–∞—Ç—å –¥–ª—è —É—á–∏—Ç–µ–ª—è" (–µ—Å–ª–∏ –±–∞–ª–ª—ã ‚úÖ)
- [ ] –ï—Å–ª–∏ –±–∞–ª–ª—ã ‚ùå ‚Üí –∫–Ω–æ–ø–∫–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã + –ø–æ–¥—Å–∫–∞–∑–∫–∞

---

**–í—Å—ë!** –ú–æ–¥—É–ª—å –≥–æ—Ç–æ–≤ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.

